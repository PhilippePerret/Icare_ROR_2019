<html>

<head>
<title>Icare-ROR-2019</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!-- NOTE: margin property = top-right-bottom-left -->
<style type="text/css">

	body {background-color: #e2e2e2}
    
    p.topLevelItemTitle {
    	margin: 30px 0px 5px 0px;
    	font-family: Times, Times New Roman, Palatino, Cochin, Serif;
    	font-size: 30px;
    	}
    	
    p.folderTitle {
    	margin: 30px 0px 5px 0px;
    	font-family: Times, Times New Roman, Palatino, Cochin, Serif;
    	font-size: 18px;
    	}
    
    p.itemTitle {
    	margin: 30px 0px 5px 0px;
    	font-family: Helvetica, Arial, Sans-Serif;
    	font-size: 12px;
    	font-weight: bold;
    	}
    	
    p.itemText {
    	margin: 0px 0px 10px 0px;
    	font-family: Helvetica, Arial, Sans-Serif;
    	font-size: 12px;
    	}
    	
    p.itemTextStart {
    	margin: 30px 0px 10px 0px;
    	font-family: Helvetica, Arial, Sans-Serif;
    	font-size: 12px;
    	}
    
    .page {border: 1px solid #c0c0c0; background: #fff}
    
    hr {
        border: none;
        height: 1px;
        color: #d4d4d4;
        background-color: #d4d4d4;
      	}
      	
    hr.afterTitle {
    	margin-top: -3px;
    }
      	
    hr.afterText {
    	margin-top: 30px;
    }
      	
    ul {
      	list-style-type: none;
      	padding-left: 30px;
      	}
      	
</style>

</head>

<body>

<table border="0" width="100%" cellspacing="3">
<tr>
<td>

<table class="page" width="100%" cellspacing="10" cellpadding="2">

<!-- Top margin -->
<!-- Not needed, because of the padding above titles. -->
<!--<tr><td height="15px"></td></tr>-->

<tr>

<!-- 42 + 30 of list indent = 72 - one inch. -->
<!-- Actually that ends up too much, so we do 25 + 30 = 55px. -->
<td width="25px">

<td valign="top">

<ul>
<li>
<p class="topLevelItemTitle">Introduction</p>
<p class="itemText">Ce manuel présente l'utilisation du site de l'atelier Icare en version Ruby On Rails mise en place en 2019.</p>
</li>
<li>
<p class="topLevelItemTitle">User</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Possessions</p>
<p class="itemText">Un user peut posséder :</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• un seul profil (question : faut-il détacher le profil de l'enregistrement simple ?)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• un ou plusieurs icmodules (modules icariens), actifs ou non</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• des messages frigo</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• des icetapes (étapes de modules icariens)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• des icdocuments (document de travail propres aux modules)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• des tickets</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• des watchers (opération atelier)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• des actualités</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• des témoignages</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>• des questions mini-faq</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
<li>
<p class="itemTitle">Propriétés directes</p>
<p class="itemText">J'appelle "propriétés directes" les propriétés qui ne dépendent pas d'autres objets. C'est le cas par exemple de l'adresse email ou du pseudo.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">id</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Identifiant absolu de l'utilisateur (icarien-ne).</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">email</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Son adresse email, validée</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">name</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Pseudo utilisé sur le site (obligatoire)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">nom</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Nom réel de l'icarien (obligatoire)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">prenom</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Prénom réel de l'icarien (obligatoire)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">password_digest</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Mot de passe encrypté</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">statut</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Bits des privilèges (cf. Statut)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">options</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Options diverses (cf. Options)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">created_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date de cr...</p>
</li>
<li>
<p class="itemTitle">Statut</p>
<p class="itemText">Propriété :statut</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">0 Simple inscrit</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1 Simple icarien</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2 Rédacteur (de ?)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4 Administrateur</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">8 Grand manitou</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Donc :<span class="Apple-converted-space"> </span></span></p></p>
<p class="itemText"><p class="p1"><span class="s1">14 : tous les droits (super administrateur, rédacteur)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">6<span class="Apple-converted-space">  </span>: administration et rédaction (4 + 2)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">La méthode pour afficher la version humaine du statut est :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>human_privileges(user)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Note : la méthode `human_statut(user)` concerne le statut de l'icarien pour savoir s'il est en pause, actif, etc.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
<li>
<p class="itemTitle">Options</p>
<p class="itemText">Propriété : options</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">C'est un mot de 16 chiffres où chaque chiffre représente une option.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>Bit</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Valeurs possibles</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0: à valider, 1: accepté, 2: actif, 3: en pause, 4: inactif, 9: détruit</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Confirmation du mail<span class="Apple-converted-space"> </span></span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1: confirmé, 0: non confirmé</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Redirection après l'identification</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">cf. la méthode `redirection_after_login` du fichier sessions_helper</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Candidature complète</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Ce bit est mis à 1 quand l'user a pu être créé avec une inscription complète, donc les documents et les modules choisis. Si...</p>
</li>
<li>
<p class="itemTitle">Helpers</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Féminines</p>
<p class="itemText">Féminisation des textes</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Pour gérer les féminines, on utilise la méthode String#sexize qui va remplacer tous les templates %{…} se trouvant dans le texte par leur valeur masculine ou féminine.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Par exemple :<span class="Apple-converted-space"> </span></span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>'icarien%{ne}'.sexize(user)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span># =&gt; "icarien" si homme, "icarienne" si femme</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Si user n'est pas fourni, c'est l'utilisateur courant qui est utilisé.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Les féminines sont définies dans le fichier feminines.</p>
</li>
</ul>
</ul>
<hr class="afterText"/>

<li>
<p class="topLevelItemTitle">Modules Icariens</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">AbsModules</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'un module d'apprentissage absolu sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :ic_modules</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :users, through :ic_modules</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :documents, through: :ic_modules (fonctionne ?)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">name</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Nom humain du module</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">P.e. « Structure »</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">dim</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Diminutif, pour les noms par exemple.<span class="Apple-converted-space"> </span></span></p></p>
<p class="itemText"><p class="p1"><span class="s1">p.e. "Stt" pour "Structure"</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">module_id</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">ID du module absolu avant 2016.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">tarif</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Tarif en euros du module (mensualité pour les modules à durée indéfinie)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">nombre_jours</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Durée en nombre de jour du module. Si nil, c'est un module à durée indéter...</p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">IcModules</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'un module d'apprentissage d'icarien sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :abs_module</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :paiements</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :pauses</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :ic_etapes</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :documents, through: :ic_etapes</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">project_name</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Nom du projet (son titre) s'il en a un</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">state</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Etat du module (nouvelle propriété). Cf. State</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">options</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">OBSOLÈTE (cf. le fichier Options)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">started_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date de démarrage du module</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Avant : starting_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">ended_at</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date de fin du module (réelle, pas une pause)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Avant : ending_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">next_paiement</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">La d...</p>
</li>
<li>
<p class="itemTitle">State</p>
<p class="itemText"></span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Statut (état) du module (propriété :state)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Valeurs</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Description</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Module en attente de démarrage</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Module d'apprentissage en cours de travail</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Module d'apprentissage en pause</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Module terminé normalement</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Module interrompu/abandonné</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">5</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">6</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">7</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
<li>
<p class="itemTitle">Options</p>
<p class="itemText">Options pour l'ic-module.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">OBSOLÈTE — Mais il faut passer les valeurs du bit 0 dans la propriété :state.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>Bit</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Valeurs possibles</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">cf. state</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">5</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">5</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">6</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">6</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">7</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">AbsEtapes</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'une étape de module d'apprentissage absolu sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :abs_module</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">numero</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Numéro de l'étape (de 1 à 999)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">type</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">(nouvelle propriété) Type de l'étape. Cf. Type.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">titre</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Titre de l'étape</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">objectif</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">L'objectif à atteindre au cours de cette étape</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">travail</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Définition du travail (HTML). Note : peut être une liste de travaux.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">methode</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Éléments de méthode</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">travaux</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">OBSOLÈTE</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">duree</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Nombre de jours par défaut pour cette étape.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">duree_max</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">La durée maximum acceptable pour cette étape.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">liens</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Li...</p>
</li>
<li>
<p class="itemTitle">Type</p>
<p class="itemText"></span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Types de l'étape absolue (propriété :type)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Note : ce sont des bits qui s'additionnent (bit|bit)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Valeurs</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Description</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Aucun type</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail sur la structure</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail sur les personnages</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail sur les thèmes</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">8</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail sur les intrigues</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">16</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail sur un document en particulier (synopsis, pitch, etc.)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">32</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail de recherche d'idées</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">64</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail de réflexion</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">128</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail de rédaction</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">256</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail d'affinement, de finalisation</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">IcEtapes</p>
<p class="itemText">Les étapes des modules d'icariens</p>
</li>
<hr class="afterText"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'une étape de module d'apprentissage d'icarien sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :ic_module</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :abs_etape</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user, through :ic_module</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :documents</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">status</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Statut de l'étape. Cf. Statuts</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">options</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Options de l'étape, quelques valeurs utiles, fixes ou mobiles. Cf. Options</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">travail_propre</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Éventuellement, le travail propre de l'étape, ou un travail supplémentaire pour l'étape.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">started_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date de démarrage de l'étape. Elle pourrait être définie lorsque l'user arrive sur son bur...</p>
</li>
<li>
<p class="itemTitle">Statuts</p>
<p class="itemText"></span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Statuts de l'étape (propriété :status)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Valeurs</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Description</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Jamais affecté</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Étape démarrée, l'icarien y travaille (valeur par défaut)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">L'icarien a remis son travail, mais il n'est pas encore reçu</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Travail téléchargé par Phil</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Dépôt des commentaires (mais l'icarien ne les a pas téléchargé)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">5</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">L'icarien télécharge ses commentaires</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">6</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Dépôt des documents sur le QDD (donc il faut que l'icarien ait téléchargé ses commentaires)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">7</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Définition du partage des documents par l'icarien (fin de cycle)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
<li>
<p class="itemTitle">Options</p>
<p class="itemText">Options pour l'ic-étape.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>Bit</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Valeurs possibles</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Bit d'avertissement d'échéance d'étape dépassée</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">De 0: pas d'avertissement à 9: tous les avertissements ont été donnés, on considère l'icarien comme déserteur.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Réalité de l'étape</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1: l'étape est considérée comme "réelle" (*). 0: l'étape n'est pas réelle.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">(*) Une étape « réelle » sera comptabilisée dans les modules à durée déterminée qui doivent suivre 8 étapes en général.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">5</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">5</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">6</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">6</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">7</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">Pauses</p>
<p class="itemText">Les pauses des modules d'icarien.</p>
</li>
<hr class="afterText"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'un module d'apprentissage d'icarien sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :ic_module</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">started_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">La date du début de la pause (ne pas utiliser created_at car la donnée peut être créée plus tard)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">ended_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date de la fin de la pause</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">motif</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Motif de la pause</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>+ les timestamps par défaut, created_at et updated_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">     </span></p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">IcDocuments</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'un document de module d'apprentissage d'icarien sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :ic_etape</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :ic_module, through :ic_etape</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user, through :ic_etape</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :lectures</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">original_name</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Le nom original du fichier tel qu'il a été transmis</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">affixe</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Affixe donné au document</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">expected_comments_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date espérée de remise des commentaires</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">OBSOLÈTE : c'est l'étape qui porte cette donnée.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">commented_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date effective de remise des commentaires</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">note_auteur</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">La note donnée par l'auteur à son...</p>
</li>
<li>
<p class="itemTitle">Options</p>
<p class="itemText">Options pour `original_options` et `comments_options`, les options des deux documents, original et commenté.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>Bit</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Valeurs possibles</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Existence</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1: Le document existe, 0: le document<span class="Apple-converted-space">  </span>n'existe pas</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Partage</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0: non défini, 1: partagé, 2: non partagé</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Téléchargement (user ou admin)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0: non chargé, 1: chargé (par l'admin si original, par l'icarien si comments)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Présence sur le QDD</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0: non déposé, 1: déposé sur le QDD (original si original_options, comments si comments_options)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">5</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Définitio...</p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">Lectures</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés des lectures d'un document sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :ic_document</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user, as: lecteur</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user, through :ic_document, as: auteur</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">comments</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Commentaire éventuel du lecteur</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">original_cote</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Cote sur 5 attribuée par le lecteur au document original</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">comments_cote</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Cote sur 5 du lecteur au document commenté</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>+ les timestamps par défaut, created_at et updated_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">     </span></p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">Paiements</p>
<p class="itemText">Les paiements concernant un module d'icarien.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
<hr class="afterText"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'un module d'apprentissage d'icarien sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :ic_module</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user, through :ic_module</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">objet</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Objet du paiement</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">montant</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Montant du paiement en euros</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">facture</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Le texte de la facture complète (HTML)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">note</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Une note (de l'admin) sur ce paiement</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>+ les timestamps par défaut, created_at et updated_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">     </span></p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">MiniFaq</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">belongs_to :abs_etape</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">question</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">La question posée à Phil</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">reponse</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Montant du paiement en euros</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">state</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">État de la question</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0: non répondu, 1: répondu sans indice de satisfaction,</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2: le questionneur est satisfait par la réponse, 3: le questionneur n'est pas satisfait par la question</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">note</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Une note (de l'admin) sur cette question, peut-être pour indiquer pourquoi la réponse n'est pas satisfaisante ou pour la compléter.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>+ les timestamps par défaut, created_at et updated_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">     </span></p>
</li>
</ul>
</ul>
<hr class="afterText"/>

<li>
<p class="topLevelItemTitle">OtherDocuments</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'un document quelconque, donc autre qu'un document de module d'apprentissage d'icarien :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">has_many :lectures</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">original_name</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Le nom original du fichier tel qu'il a été transmis</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">affixe</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Affixe donné au document</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">commented_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date effective de remise des commentaires</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">dtype</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Le type du document, tel que défini dans la table DTYPES. Par exemple, le document de présentation a le dtype 'PRES' et la lettre de motivation le dtype 'MOTI'.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">original_options</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Les options concern...</p>
</li>
<li>
<p class="itemTitle">Options</p>
<p class="itemText">Options pour `original_options` et `comments_options`, les options des deux documents, original et commenté.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>Bit</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Valeurs possibles</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Existence</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1: Le document existe, 0: le document<span class="Apple-converted-space">  </span>n'existe pas</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Partage</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0: non défini, 1: partagé, 2: non partagé</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">2</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Téléchargement (user ou admin)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0: non chargé, 1: chargé (par l'admin si original, par l'icarien si comments)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">3</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Présence sur le QDD</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">0: non déposé, 1: déposé sur le QDD (original si original_options, comments si comments_options)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">4</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">5</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Définitio...</p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="topLevelItemTitle">Quotidien programmation</p>
<p class="itemText">Opérations de dépôt</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>$ git add -A<span class="Apple-converted-space">  </span># pour ajouter les nouveaux fichiers</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>$ git commit -am "Message dépôt"<span class="Apple-converted-space">  </span># pour faire un nouveau dépôt</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>$ git push<span class="Apple-converted-space">  </span># pour déposer ce dépôt</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>$ git push heroku master<span class="Apple-converted-space">  </span># pour actualiser ce dépôt sur heroku</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Ajout d'un nouveau gem</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Quand on ajoute un nouveau gem, il faut :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>$ bundler install --without production<span class="Apple-converted-space"> </span></span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">(note : le `--without production' n'est utile qu'une fois)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Puis exécuter les opérations de dépôt ci-dessus.</p>
</li>
<li>
<p class="topLevelItemTitle">Désignation</p>
<p class="itemText">La méthode `designation_for(&lt;objet&gt;[, &lt;options&gt;])` permet d'obtenir une désignation humaine de l'objet `&lt;objet&gt;` avec les options `&lt;options&gt;`.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Exemple :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>= designation_for(icdocument, name: true, with_ids: true)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Options</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>with_ids: true <span class="Apple-converted-space">  </span>Ajoute les ids (administration)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>with_user: true<span class="Apple-converted-space">  </span>On ajoute le nom de l'icarien.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>name: true<span class="Apple-converted-space">    </span>Utilise le nom (document, étape, module) plutôt que</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>l'identifiant.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>full: true<span class="Apple-converted-space">  </span>Toutes les options sont activées, sauf celles précédées de "*"</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>distance...</p>
</li>
<li>
<p class="topLevelItemTitle">Tickets</p>
<p class="itemText">Description rapide de l'utilisation d'un ticket :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Création du ticket, par exemple pour un ticket qui s'appelle 'Jouer le ticket' (avec la méthode `lien_vers(ticket)`, ce name sera utilisé comme titre du lien) :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span># Ce ticket aura une durée de vie de 4 jours et rejoindra l'adresse /user/1</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span># quand il sera invoqué</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>@ticket = Phil.tickets.create(name: 'Jouer le ticket', action: '/user/1', duree: 4.days)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Dans le mail (vue) qui contient le lien pour jouer le ticket, on met :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>= lien_vers(@ticke...</p>
</li>
<hr class="afterText"/>
<ul>
<li>
<p class="itemTitle">Implémentation</p>
<p class="itemText">Un ticket est toujours associé à un action-watcher qui contient son token.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>ticket = Ticket.find(2)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>ticket.action_watcher</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span># =&gt; ActionWatcher du ticket</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>ticket.action_watcher.data</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span># =&gt; token du ticket (identique à ticket.token)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Cet action-watcher à une action user/watcher_ticket.</p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="topLevelItemTitle">ActionWatchers</p>
<p class="itemText">Watchers</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Réflexion</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Adopte-t-on le même fonctionnement que sur l'ancien site ? C'est-à-dire que les actions sont déclenchées par des notifications complexes.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">À quoi est-ce que ça ressemblerait dans une application Rails ?</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Il y aurait un model ActionWatcher qui serait en même temps un observateur et une action possible. Il surveille d'un côté et opère de l'autre.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Est-ce qu'il faudrait des AbsActionWatcher qui correspondraient aux choses à faire ? Par exemple, quand l'icarien doit procéder à un pa...</p>
</li>
<hr class="afterText"/>
<ul>
<li>
<p class="itemTitle">Propriétés</p>
<p class="itemText">Les propriétés d'un action_watcher :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">belongs_to :user</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">model</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Modèle qui sera touché par l'actionwatcher</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Avant : `objet`.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">model_id</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Identifiant de l'instance du modèle.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Avant : `objet_id`</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">action</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Path de l'action watcher, là où se trouve ses fichiers.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Avant : `processus` puis `action_watcher_path`</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">triggered_at</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Date où le watcher doit être déclenché. Par exemple, pour un paiement, quelques jours avant son échéance.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Avant : `trigerred`</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">data</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Éventuellement les données dont a besoin l'action-watcher....</p>
</li>
<li>
<p class="itemTitle">Création</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">De l'action-watcher lui-même</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Introduction</p>
<p class="itemText">Pendant la phase de conception du watcher, on peut utiliser les méthodes suivantes dans la méthode `execute` du watcher pour ne pas tout recommencer à chaque fois :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>dont_destroy <span class="Apple-converted-space">  </span>Empêche la destruction du watcher</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>dont_send_mails<span class="Apple-converted-space">  </span>Ne procède pas à l'envoi des mails</p>
</li>
<li>
<p class="itemTitle">Création du dossier et contenu</p>
<p class="itemText">Le plus simple est d'utiliser mon générateur rails :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>$ rails g action_watcher &lt;folder&gt;/&lt;nom_du_watcher&gt;[ &lt;options&gt;]</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Cela crée tout ce qu'il faut dans le dossier ./lib/action_watchers/&lt;nom_du_watcher&gt;/</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Les options peuvent définir les mails à créer dans le dossier. Par défaut, les mails envoyés à la création du watcher ne sont pas copiés. On les ajoute avec :</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>--mails-before # pour les créer les deux</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>--mail-admin-before</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>--mail-user-before</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Par défaut, les mails envoyés à l'exécution du watc...</p>
</li>
<li>
<p class="itemTitle">Formulaire</p>
<p class="itemText">Pour faire un un formulaire devant jouer l'action-watcher, utiliser :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>= form_for(action_watcher.objet, url: action_watcher.form_url, method: :post) do |f|</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>...</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>.right.vair</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">   </span>= f.submit('Soumettre le formulaire', class: 'btn btn-primary btn-small')</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
<li>
<p class="itemTitle">Notification</p>
<p class="itemText">Formulaire type pour une notification qui doit jouer l'action-watcher :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">= form_for('&lt;prefix&gt;', url: aw.form_url) do</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>= ... champs</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>.right.vair</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>= submit_tag('Soumettre')</p>
</li>
<hr class="afterText"/>
<ul>
<li>
<p class="itemTitle">Type de la rangée</p>
<p class="itemText">La notification a un type qui est renvoyé par la méthode `notification_type` qui doit être définie dans l'action_watcher_helpers.rb du watcher.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Ce type permet de définit l'aspect de la notification. Les types possibles sont :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">simple-notice</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Une note d'information sans importance</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">action-required</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Une action requise, mais pas urgente, comme par exemple une attribution de note à un document lu.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">main-action-required</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Une action importante requise, comme par exemple le démarrage d'un module d'apprenti...</p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">Modification du mail envoyé</p>
<p class="itemText">Le mail envoyé à l'exécution peut être modifié de deux façons. La première consiste à mettre une alternative dans le mail (if… else… end), le second consiste à modifier le nom du mail choisi.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Modification par alternative</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Par exemple dans .../mailto_admin_after.html.erb</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>&lt;% if cest_ce_cas_la %&gt;</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>... contenu du mail ...</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>&lt;% else %&gt;</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>... contenu alternatif</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>&lt;% end %&gt;</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Modification du mail utilisé</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Par défaut, c'est le mail `mailto_&lt;qui&gt;_after.html.erb` qui est utilisé. On peut modifier ce nom en ...</p>
</li>
<li>
<p class="itemTitle">Interruption de l'action-watcher</p>
<p class="itemText">Dans le programme (méthode `execute`), on peut interrompre la procédure avec la tournure :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>def execute</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>...</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>interrupt and return</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>...</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>end</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Cela produit l'interruption totale du processus. Les mails `after` ne seront pas envoyés et l'action-watcher ne sera pas détruit. </p>
</li>
<li>
<p class="itemTitle">Messages de fin</p>
<p class="itemText">On définit le message de fin en utilisant l'une de ces deux méthodes :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>self.success_message<span class="Apple-converted-space">  </span>= '&lt;le message de succès&gt;'</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>self.failure_message<span class="Apple-converted-space">  </span>= '&lt;le message d'échec&gt;'</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Pour « aglutiner » plusieurs messages, on utilise les méthodes :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>add_success_message(&lt;message ajouté&gt;)<span class="Apple-converted-space">  </span># ou add_success_final</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>add_failure_message(&lt;problème ajouté&gt; # ou add_failure_final</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Noter qu'il suffit d'utiliser une de ces deux méthodes une seule fois pour que le message de fin soit automatiquement écrit sur la pa...</p>
</li>
<li>
<p class="itemTitle">Redirection après run</p>
<p class="itemText">Pour rediriger l'action après son exécution, on utilise tout simplement la méthode `redirect_to` avec en argument la nouvelle direction.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Mais noter que cette méthode est propre au modèle watcher, ça n'est pas le redirect_to des contrôleurs. Cf. action_watcher.</p>
</li>
<li>
<p class="itemTitle">Résultat de l'exécution</p>
<p class="itemText">Quand le watcher n'est pas joué "automatiquement" comme pour exemple pour la création de la candidature, il faut tester son bon déroulement. Pour ça, on utilise la méthode test :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>&lt;action_watcher&gt;.success?</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span># =&gt; true si le watcher a été joué avec succès.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Donc l'opération complète va être :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>aw = &lt;user&gt;.action_watchers.create(&lt;paramètres&gt;)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>[aw =] aw.run_for(&lt;user&gt;, &lt;params&gt;)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>if aw.success?</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span># C'est un succès</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>else</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span># Une erreur est survenue</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span># Elle se trouve dans aw.fatal_error</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>end</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">De l'association</p>
<p class="itemText">On crée un action-watcher avec :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>&lt;user&gt;.action_watchers.create(&lt;hash data&gt;)</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Hash data doit impérativement comporter :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>:action ou :path ou :name</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>Le chemin d'accès au dossier contenant les éléments du watchers, à partir de</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>./lib/action_watchers/</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>Par exemple 'user/traitement_candidature'</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>Bien sûr, ce path doit renvoyer à un dossier existant.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>:model (String) et :model_id (Integer) ou :objet (instance de class :model)</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>L'objet visé par l'action-watcher, par exemple un document.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>Le...</p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="itemTitle">Notes</p>
<p class="itemText">Peut-être mettre les dossiers des actions-watchers dans lib/ et utiliser `require_dependency` pour les utiliser. En fait, il semble que 'require_dependency' recharge vraiment, même la seconde fois.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Pour pouvoir utiliser require_dependency, il faut ajouter dans le fichier config/application.rb :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>config.watchable_dirs['lib'] = [:rb]</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Note : en fait, j'ai utilisé simplement `load` et ça fonctionne.</p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="topLevelItemTitle">Liens</p>
</li>
<hr class="afterTitle"/>
<ul>
<li>
<p class="itemTitle">Méthode lien_vers</p>
<p class="itemText">La méthode `lien_vers` (en référence à `link_to`) est une méthode pour pouvoir créer un lien vers n'importe quel page en fonction de l'objet fourni en paramètre (contrairement à `link_to` qui attend un titre et une url précise).</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Par exemple, `lien_vers(user)` va créer un lien vers l'utilisateur `user` en mettant en titre son pseudonyme.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">On note deux choses avec l'utilisation ci-dessus : par défaut, c'est la visualisation de l'élément qui est demandé, donc généralement la méthode `show`. Ensuite,...</p>
</li>
<li>
<p class="itemTitle">Essayer une URL</p>
<p class="itemText">Pour essayer une url, on peut ajouter le paramètre `urltry` à l'url. Cela ajoute un "essayer l'URL : ...." dans l'entête.</p>
</li>
</ul>
<hr class="afterText"/>

<li>
<p class="topLevelItemTitle">Seed</p>
<p class="itemText">Pour pouvoir essayer des configurations différentes, on peut utiliser des seeds différents.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Il suffit de les définir dans `./db/seeds/' avec un nom qui commencer par 'seed_'. Par exemple : `seed_inscription.rb'. C'est alors le seed « inscription » et il suffit de jouer la commande ci-dessous pour l'invoquer :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>$ rails db:reset:inscription</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Noter que pour charger le seed principal il faut jouer :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>$ rails db:reset:main</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"></p>
</li>
<li>
<p class="topLevelItemTitle">Dates et heures</p>
<p class="itemText">Pour voir les formats utilisables avec I18n.localize(&lt;date&gt;, format: :&lt;format&gt;), cf. le fichier general.</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Possibilité aussi d'utiliser la méthode `human_date_for(&lt;date&gt;, &lt;options&gt;)` ou son alias `designation_for(&lt;date&gt;[, &lt;options&gt;)`.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">Dans `&lt;options&gt;` on peut définir `:format`. Valeurs principales : `:simple` et `:simple_with_hour`.</span></p></p>
<p class="itemText"><p class="p1"><span class="s1">options[:distance] permet d'ajouter la distance (p.e. " (dans 8 jours)")</p>
</li>
<li>
<p class="topLevelItemTitle">Aide</p>
<p class="itemText">Les fichiers d'aide doivent se définir dans le dossier :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>./app/views/aide/files</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">On les invoque par :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>aide_{url|path}('&lt;affixe fichier&gt;')</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Par exemple :</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1"><span class="Apple-converted-space"> </span>= link_to 'Le partage', aide_url('partage')</span></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p2"><span class="s1"></span><br></p></p>
<p class="itemText"><p class="p1"><span class="s1">Ce lien affiche le contenu du fichier `./app/views/aide/files/partage.html.md`</p>
</li>
</ul>

</td>
<td width="55px">
</td>
</tr>

<!-- Bottom margin -->
<tr><td height="15px"></td></tr>

</table>

</td>
</tr>
</table>

</body>
</html>
